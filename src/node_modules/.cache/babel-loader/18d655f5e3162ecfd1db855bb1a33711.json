{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\pjcon\\\\dev\\\\simulator\\\\src\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _asyncToGenerator from\"C:\\\\Users\\\\pjcon\\\\dev\\\\simulator\\\\src\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\pjcon\\\\dev\\\\simulator\\\\src\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\pjcon\\\\dev\\\\simulator\\\\src\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{useForm}from\"react-hook-form\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var NewEntry=function NewEntry(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),teams=_useState2[0],setTeams=_useState2[1];useEffect(function(){axios.get(\"/teams\",{headers:{\"Content-Type\":\"application/json\"}}).then(function(response){console.log(response.data);setTeams(response.data);}).catch(function(ex){var error=ex.response.status===404?\"Resource not found\":\"An unexpected error has occurred\";console.log(error);});},[]);var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register;var onSubmit=function onSubmit(data){var result=teams.filter(function(obj){return obj.players===data.team;});var email=\"pjconnolly12@gmail.com\";var message=\"This email is to confirm that \".concat(data.team,\" have a tee time on \").concat(props.entry_date.slice(0,10),\" at \").concat(data.time);axios.post(\"/calendar\",{team:data.team,time:data.time,entry_date:props.entry_date.slice(0,10)}).then(function(response){console.log(response);}).catch(function(error){console.log(error);});submitEmail(email,message);props.toggleOff(false);};var times=['9am','10am','11am','12pm','1pm','2pm','3pm','4pm','5pm','6pm','7pm','8pm'];var timeOptions=times.map(function(time){return/*#__PURE__*/_jsx(\"option\",{value:time,children:time},time);});var teamOptions=teams.map(function(team){return/*#__PURE__*/_jsx(\"option\",{value:team.players,children:team.players},team.team_id);});var closeWindow=function closeWindow(){props.toggleOff(false);};var submitEmail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,message){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/send\",{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify({email:email,message:message})}).then(function(res){return res.json();});case 2:response=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return function submitEmail(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"flex p-2 w-3/4 justify-center text-xs fixed inset-0 z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-babyBlue rounded shadow-lg border-2 border-darkBlue md:w-1/2 \"+(props.toggle?\"flex\":\"hidden\"),children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"flex flex-col m-6 p-4 md:w-1/3 lg:p-8\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-darkBlue mt-4 text-lg\",children:[\"Day: \",props.entry_date.slice(5,10),\" - \",props.day_of_week]}),/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-darkBlue mt-4\",children:\"Team:\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"team\")),{},{className:\"rounded mt-1 p-1\",placeholder:\"Select your Team\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select your Team\"}),teamOptions]})),/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-darkBlue mt-4\",children:\"Time:\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"time\")),{},{className:\"rounded mt-1 p-1\",placeholder:\"Select a Time\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select a Time\"}),timeOptions]})),/*#__PURE__*/_jsx(\"input\",{className:\"mt-8 rounded bg-babyPowder text-darkBlue font-semibold cursor-pointer text-lg hover:bg-lightCyan\",type:\"submit\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"fixed top-2 right-2 text-primary font-extrabold text-lg cursor-pointer\",onClick:function onClick(){return closeWindow();},children:\"X\"})]});};","map":{"version":3,"sources":["C:/Users/pjcon/dev/simulator/src/src/components/NewEvent.tsx"],"names":["React","useState","useEffect","axios","useForm","NewEntry","props","teams","setTeams","get","headers","then","response","console","log","data","catch","ex","error","status","handleSubmit","register","onSubmit","result","filter","obj","players","team","email","message","entry_date","slice","time","post","submitEmail","toggleOff","times","timeOptions","map","teamOptions","team_id","closeWindow","fetch","method","body","JSON","stringify","res","json","toggle","day_of_week"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport {ITeam, INewEntryClick} from '../tools/interfaces'\r\nimport { useForm } from \"react-hook-form\";\r\n\r\n\r\nexport const NewEntry = (props:INewEntryClick): JSX.Element => {\r\n\r\n  const [teams, setTeams] = useState<ITeam[]>([])\r\n\r\n  type Inputs = {\r\n    team: string,\r\n    time: string\r\n  }\r\n\r\n  useEffect(() =>  {\r\n      axios\r\n      .get<ITeam[]>(\"/teams\", {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n      })\r\n      .then(response => {\r\n        console.log(response.data)\r\n        setTeams(response.data);\r\n      })\r\n      .catch(ex => {\r\n        const error =\r\n        ex.response.status === 404\r\n          ? \"Resource not found\"\r\n          : \"An unexpected error has occurred\";\r\n          console.log(error)\r\n      });\r\n  }, [])\r\n\r\n  const { handleSubmit, register} = useForm<Inputs>();\r\n  const onSubmit = (data: Inputs) => {\r\n      let result = teams.filter(obj => {\r\n        return obj.players === data.team\r\n      })\r\n      let email = `pjconnolly12@gmail.com`;\r\n      let message = `This email is to confirm that ${data.team} have a tee time on ${props.entry_date.slice(0,10)} at ${data.time}`;\r\n      axios\r\n        .post(\"/calendar\", {\r\n          team: data.team,\r\n          time: data.time,\r\n          entry_date: props.entry_date.slice(0,10)\r\n          })\r\n        .then(function(response: Inputs | any) {\r\n          console.log(response)\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n        submitEmail(email, message)\r\n        props.toggleOff(false)\r\n  }\r\n\r\n  const times = ['9am','10am', '11am', '12pm', '1pm', '2pm', '3pm', '4pm', '5pm', '6pm', '7pm', '8pm']\r\n\r\n  const timeOptions = times.map(time => {\r\n    return (\r\n    <option key={time} value={time}>{time}</option>)\r\n  })\r\n\r\n  const teamOptions = teams.map(team=> {\r\n    return (\r\n      <option key={team.team_id} value={team.players}>{team.players}</option>\r\n    )\r\n  })\r\n\r\n  const closeWindow = () => {\r\n    props.toggleOff(false)\r\n  }\r\n\r\n  const submitEmail = async (email: string, message: string) => {\r\n    const response = await fetch(\"/send\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({email: email, message: message }),\r\n    })\r\n      .then((res) => res.json())\r\n  };\r\n\r\n  return (\r\n    <div className={\"flex p-2 w-3/4 justify-center text-xs fixed inset-0 z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-babyBlue rounded shadow-lg border-2 border-darkBlue md:w-1/2 \" + (props.toggle ? \"flex\" : \"hidden\")}>\r\n    <form onSubmit={handleSubmit(onSubmit)} className=\"flex flex-col m-6 p-4 md:w-1/3 lg:p-8\">\r\n      <label className='block text-sm font-medium text-darkBlue mt-4 text-lg'>Day: {props.entry_date.slice(5,10)} - {props.day_of_week}</label>\r\n      <label className=\"block text-sm font-medium text-darkBlue mt-4\">Team:</label>\r\n      <select {...register(\"team\")} className=\"rounded mt-1 p-1\" placeholder='Select your Team' >\r\n      <option>Select your Team</option>\r\n        {teamOptions}\r\n      </select>\r\n      <label className=\"block text-sm font-medium text-darkBlue mt-4\">Time:</label>\r\n      <select {...register(\"time\")} className=\"rounded mt-1 p-1\" placeholder='Select a Time'>\r\n      <option>Select a Time</option>\r\n        {timeOptions}\r\n      </select>\r\n      <input className=\"mt-8 rounded bg-babyPowder text-darkBlue font-semibold cursor-pointer text-lg hover:bg-lightCyan\" type=\"submit\" />\r\n    </form>\r\n    <button className=\"fixed top-2 right-2 text-primary font-extrabold text-lg cursor-pointer\" onClick={() => closeWindow()}>X</button>\r\n    </div>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}